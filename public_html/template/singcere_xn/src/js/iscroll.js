/*! iScroll v5.1.3 ~ (c) 2008-2014 Matteo Spinelli ~ http://cubiq.org/license */
(function(e,b,g){var h=e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||e.oRequestAnimationFrame||e.msRequestAnimationFrame||function(i){e.setTimeout(i,1000/60)};var d=(function(){var m={};var n=b.createElement("div").style;var i=(function(){var r=["t","webkitT","MozT","msT","OT"],p,q=0,o=r.length;for(;q<o;q++){p=r[q]+"ransform";if(p in n){return r[q].substr(0,r[q].length-1)}}return false})();function k(o){if(i===false){return false}if(i===""){return o}return i+o.charAt(0).toUpperCase()+o.substr(1)}m.getTime=Date.now||function l(){return new Date().getTime()};m.extend=function(q,p){for(var o in p){q[o]=p[o]}};m.addEvent=function(r,q,p,o){r.addEventListener(q,p,!!o)};m.removeEvent=function(r,q,p,o){r.removeEventListener(q,p,!!o)};m.prefixPointerEvent=function(o){return e.MSPointerEvent?"MSPointer"+o.charAt(9).toUpperCase()+o.substr(10):o};m.momentum=function(v,p,r,w,u,t){var o=v-p,q=g.abs(o)/r,x,s;t=t===undefined?0.0006:t;x=v+(q*q)/(2*t)*(o<0?-1:1);s=q/t;if(x<w){x=u?w-(u/2.5*(q/8)):w;o=g.abs(x-v);s=o/q}else{if(x>0){x=u?u/2.5*(q/8):0;o=g.abs(v)+x;s=o/q}}return{destination:g.round(x),duration:s}};var j=k("transform");m.extend(m,{hasTransform:j!==false,hasPerspective:k("perspective") in n,hasTouch:"ontouchstart" in e,hasPointer:e.PointerEvent||e.MSPointerEvent,hasTransition:k("transition") in n});m.isBadAndroid=/Android /.test(e.navigator.appVersion)&&!(/Chrome\/\d/.test(e.navigator.appVersion));m.extend(m.style={},{transform:j,transitionTimingFunction:k("transitionTimingFunction"),transitionDuration:k("transitionDuration"),transitionDelay:k("transitionDelay"),transformOrigin:k("transformOrigin")});m.hasClass=function(p,q){var o=new RegExp("(^|\\s)"+q+"(\\s|$)");return o.test(p.className)};m.addClass=function(p,q){if(m.hasClass(p,q)){return}var o=p.className.split(" ");o.push(q);p.className=o.join(" ")};m.removeClass=function(p,q){if(!m.hasClass(p,q)){return}var o=new RegExp("(^|\\s)"+q+"(\\s|$)","g");p.className=p.className.replace(o," ")};m.offset=function(o){var q=-o.offsetLeft,p=-o.offsetTop;while(o=o.offsetParent){q-=o.offsetLeft;p-=o.offsetTop}return{left:q,top:p}};m.preventDefaultException=function(q,o){for(var p in o){if(o[p].test(q[p])){return true}}return false};m.extend(m.eventType={},{touchstart:1,touchmove:1,touchend:1,mousedown:2,mousemove:2,mouseup:2,pointerdown:3,pointermove:3,pointerup:3,MSPointerDown:3,MSPointerMove:3,MSPointerUp:3});m.extend(m.ease={},{quadratic:{style:"cubic-bezier(0.25, 0.46, 0.45, 0.94)",fn:function(o){return o*(2-o)}},circular:{style:"cubic-bezier(0.1, 0.57, 0.1, 1)",fn:function(o){return g.sqrt(1-(--o*o))}},back:{style:"cubic-bezier(0.175, 0.885, 0.32, 1.275)",fn:function(p){var o=4;return(p=p-1)*p*((o+1)*p+o)+1}},bounce:{style:"",fn:function(o){if((o/=1)<(1/2.75)){return 7.5625*o*o}else{if(o<(2/2.75)){return 7.5625*(o-=(1.5/2.75))*o+0.75}else{if(o<(2.5/2.75)){return 7.5625*(o-=(2.25/2.75))*o+0.9375}else{return 7.5625*(o-=(2.625/2.75))*o+0.984375}}}}},elastic:{style:"",fn:function(o){var p=0.22,q=0.4;if(o===0){return 0}if(o==1){return 1}return(q*g.pow(2,-10*o)*g.sin((o-p/4)*(2*g.PI)/p)+1)}}});m.tap=function(q,o){var p=b.createEvent("Event");p.initEvent(o,true,true);p.pageX=q.pageX;p.pageY=q.pageY;q.target.dispatchEvent(p)};m.click=function(p){var q=p.target,o;if(!(/(SELECT|INPUT|TEXTAREA)/i).test(q.tagName)){o=b.createEvent("MouseEvents");o.initMouseEvent("click",true,true,p.view,1,q.screenX,q.screenY,q.clientX,q.clientY,p.ctrlKey,p.altKey,p.shiftKey,p.metaKey,0,null);o._constructed=true;q.dispatchEvent(o)}};return m})();function a(l,k){this.wrapper=typeof l=="string"?b.querySelector(l):l;this.scroller=this.wrapper.children[0];this.scrollerStyle=this.scroller.style;this.options={resizeScrollbars:true,mouseWheelSpeed:20,snapThreshold:0.334,startX:0,startY:0,scrollY:true,directionLockThreshold:5,momentum:true,bounce:true,bounceTime:600,bounceEasing:"",preventDefault:true,preventDefaultException:{tagName:/^(INPUT|TEXTAREA|BUTTON|SELECT)$/},HWCompositing:true,useTransition:true,useTransform:true};for(var j in k){this.options[j]=k[j]}this.translateZ=this.options.HWCompositing&&d.hasPerspective?" translateZ(0)":"";this.options.useTransition=d.hasTransition&&this.options.useTransition;this.options.useTransform=d.hasTransform&&this.options.useTransform;this.options.eventPassthrough=this.options.eventPassthrough===true?"vertical":this.options.eventPassthrough;this.options.preventDefault=!this.options.eventPassthrough&&this.options.preventDefault;this.options.scrollY=this.options.eventPassthrough=="vertical"?false:this.options.scrollY;this.options.scrollX=this.options.eventPassthrough=="horizontal"?false:this.options.scrollX;this.options.freeScroll=this.options.freeScroll&&!this.options.eventPassthrough;this.options.directionLockThreshold=this.options.eventPassthrough?0:this.options.directionLockThreshold;this.options.bounceEasing=typeof this.options.bounceEasing=="string"?d.ease[this.options.bounceEasing]||d.ease.circular:this.options.bounceEasing;this.options.resizePolling=this.options.resizePolling===undefined?60:this.options.resizePolling;if(this.options.tap===true){this.options.tap="tap"}if(this.options.shrinkScrollbars=="scale"){this.options.useTransition=false}this.options.invertWheelDirection=this.options.invertWheelDirection?-1:1;this.x=0;this.y=0;this.directionX=0;this.directionY=0;this._events={};this._init();this.refresh();this.scrollTo(this.options.startX,this.options.startY);this.enable()}a.prototype={version:"5.1.3",_init:function(){this._initEvents();if(this.options.scrollbars||this.options.indicators){this._initIndicators()}if(this.options.mouseWheel){this._initWheel()}if(this.options.snap){this._initSnap()}if(this.options.keyBindings){this._initKeys()}},destroy:function(){this._initEvents(true);this._execEvent("destroy")},_transitionEnd:function(i){if(i.target!=this.scroller||!this.isInTransition){return}this._transitionTime();if(!this.resetPosition(this.options.bounceTime)){this.isInTransition=false;this._execEvent("scrollEnd")}},_start:function(j){if(d.eventType[j.type]!=1){if(j.button!==0){return}}if(!this.enabled||(this.initiated&&d.eventType[j.type]!==this.initiated)){return}if(this.options.preventDefault&&!d.isBadAndroid&&!d.preventDefaultException(j.target,this.options.preventDefaultException)){j.preventDefault()}var i=j.touches?j.touches[0]:j,k;this.initiated=d.eventType[j.type];this.moved=false;this.distX=0;this.distY=0;this.directionX=0;this.directionY=0;this.directionLocked=0;this._transitionTime();this.startTime=d.getTime();if(this.options.useTransition&&this.isInTransition){this.isInTransition=false;k=this.getComputedPosition();this._translate(g.round(k.x),g.round(k.y));this._execEvent("scrollEnd")}else{if(!this.options.useTransition&&this.isAnimating){this.isAnimating=false;this._execEvent("scrollEnd")}}this.startX=this.x;this.startY=this.y;this.absStartX=this.x;this.absStartY=this.y;this.pointX=i.pageX;this.pointY=i.pageY;this._execEvent("beforeScrollStart")},_move:function(o){if(!this.enabled||d.eventType[o.type]!==this.initiated){return}if(this.options.preventDefault){o.preventDefault()}var p=o.touches?o.touches[0]:o,j=p.pageX-this.pointX,k=p.pageY-this.pointY,n=d.getTime(),i,q,m,l;this.pointX=p.pageX;this.pointY=p.pageY;this.distX+=j;this.distY+=k;m=g.abs(this.distX);l=g.abs(this.distY);if(n-this.endTime>300&&(m<10&&l<10)){return}if(!this.directionLocked&&!this.options.freeScroll){if(m>l+this.options.directionLockThreshold){this.directionLocked="h"}else{if(l>=m+this.options.directionLockThreshold){this.directionLocked="v"}else{this.directionLocked="n"}}}if(this.directionLocked=="h"){if(this.options.eventPassthrough=="vertical"){o.preventDefault()}else{if(this.options.eventPassthrough=="horizontal"){this.initiated=false;return}}k=0}else{if(this.directionLocked=="v"){if(this.options.eventPassthrough=="horizontal"){o.preventDefault()}else{if(this.options.eventPassthrough=="vertical"){this.initiated=false;return}}j=0}}j=this.hasHorizontalScroll?j:0;k=this.hasVerticalScroll?k:0;i=this.x+j;q=this.y+k;if(i>0||i<this.maxScrollX){i=this.options.bounce?this.x+j/3:i>0?0:this.maxScrollX}if(q>0||q<this.maxScrollY){q=this.options.bounce?this.y+k/3:q>0?0:this.maxScrollY}this.directionX=j>0?-1:j<0?1:0;this.directionY=k>0?-1:k<0?1:0;if(!this.moved){this._execEvent("scrollStart")}this.moved=true;this._translate(i,q);if(n-this.startTime>300){this.startTime=n;this.startX=this.x;this.startY=this.y}},_end:function(p){if(!this.enabled||d.eventType[p.type]!==this.initiated){return}if(this.options.preventDefault&&!d.preventDefaultException(p.target,this.options.preventDefaultException)){p.preventDefault()}var q=p.changedTouches?p.changedTouches[0]:p,l,k,o=d.getTime()-this.startTime,i=g.round(this.x),t=g.round(this.y),s=g.abs(i-this.startX),r=g.abs(t-this.startY),m=0,j="";this.isInTransition=0;this.initiated=0;this.endTime=d.getTime();if(this.resetPosition(this.options.bounceTime)){return}this.scrollTo(i,t);if(!this.moved){if(this.options.tap){d.tap(p,this.options.tap)}if(this.options.click){d.click(p)}this._execEvent("scrollCancel");return}if(this._events.flick&&o<200&&s<100&&r<100){this._execEvent("flick");return}if(this.options.momentum&&o<300){l=this.hasHorizontalScroll?d.momentum(this.x,this.startX,o,this.maxScrollX,this.options.bounce?this.wrapperWidth:0,this.options.deceleration):{destination:i,duration:0};k=this.hasVerticalScroll?d.momentum(this.y,this.startY,o,this.maxScrollY,this.options.bounce?this.wrapperHeight:0,this.options.deceleration):{destination:t,duration:0};i=l.destination;t=k.destination;m=g.max(l.duration,k.duration);this.isInTransition=1}if(this.options.snap){var n=this._nearestSnap(i,t);this.currentPage=n;m=this.options.snapSpeed||g.max(g.max(g.min(g.abs(i-n.x),1000),g.min(g.abs(t-n.y),1000)),300);i=n.x;t=n.y;this.directionX=0;this.directionY=0;j=this.options.bounceEasing}if(i!=this.x||t!=this.y){if(i>0||i<this.maxScrollX||t>0||t<this.maxScrollY){j=d.ease.quadratic}this.scrollTo(i,t,m,j);return}this._execEvent("scrollEnd")},_resize:function(){var i=this;clearTimeout(this.resizeTimeout);this.resizeTimeout=setTimeout(function(){i.refresh()},this.options.resizePolling)},resetPosition:function(j){var i=this.x,k=this.y;j=j||0;if(!this.hasHorizontalScroll||this.x>0){i=0}else{if(this.x<this.maxScrollX){i=this.maxScrollX}}if(!this.hasVerticalScroll||this.y>0){k=0}else{if(this.y<this.maxScrollY){k=this.maxScrollY}}if(i==this.x&&k==this.y){return false}this.scrollTo(i,k,j,this.options.bounceEasing);return true},disable:function(){this.enabled=false},enable:function(){this.enabled=true},refresh:function(){var i=this.wrapper.offsetHeight;this.wrapperWidth=this.wrapper.clientWidth;this.wrapperHeight=this.wrapper.clientHeight;this.scrollerWidth=this.scroller.offsetWidth;this.scrollerHeight=this.scroller.offsetHeight;this.maxScrollX=this.wrapperWidth-this.scrollerWidth;this.maxScrollY=this.wrapperHeight-this.scrollerHeight;this.hasHorizontalScroll=this.options.scrollX&&this.maxScrollX<0;this.hasVerticalScroll=this.options.scrollY&&this.maxScrollY<0;if(!this.hasHorizontalScroll){this.maxScrollX=0;this.scrollerWidth=this.wrapperWidth}if(!this.hasVerticalScroll){this.maxScrollY=0;this.scrollerHeight=this.wrapperHeight}this.endTime=0;this.directionX=0;this.directionY=0;this.wrapperOffset=d.offset(this.wrapper);this._execEvent("refresh");this.resetPosition()},on:function(j,i){if(!this._events[j]){this._events[j]=[]}this._events[j].push(i)},off:function(k,j){if(!this._events[k]){return}var i=this._events[k].indexOf(j);if(i>-1){this._events[k].splice(i,1)}},_execEvent:function(m){if(!this._events[m]){return}var k=0,j=this._events[m].length;if(!j){return}for(;k<j;k++){this._events[m][k].apply(this,[].slice.call(arguments,1))}},scrollBy:function(i,l,k,j){i=this.x+i;l=this.y+l;k=k||0;this.scrollTo(i,l,k,j)},scrollTo:function(i,l,k,j){j=j||d.ease.circular;this.isInTransition=this.options.useTransition&&k>0;if(!k||(this.options.useTransition&&j.style)){this._transitionTimingFunction(j.style);this._transitionTime(k);this._translate(i,l)}else{this._animate(i,l,k,j.fn)}},scrollToElement:function(i,m,j,l,k){i=i.nodeType?i:this.scroller.querySelector(i);if(!i){return}var n=d.offset(i);n.left-=this.wrapperOffset.left;n.top-=this.wrapperOffset.top;if(j===true){j=g.round(i.offsetWidth/2-this.wrapper.offsetWidth/2)}if(l===true){l=g.round(i.offsetHeight/2-this.wrapper.offsetHeight/2)}n.left-=j||0;n.top-=l||0;n.left=n.left>0?0:n.left<this.maxScrollX?this.maxScrollX:n.left;n.top=n.top>0?0:n.top<this.maxScrollY?this.maxScrollY:n.top;m=m===undefined||m===null||m==="auto"?g.max(g.abs(this.x-n.left),g.abs(this.y-n.top)):m;this.scrollTo(n.left,n.top,m,k)},_transitionTime:function(k){k=k||0;this.scrollerStyle[d.style.transitionDuration]=k+"ms";if(!k&&d.isBadAndroid){this.scrollerStyle[d.style.transitionDuration]="0.001s"}if(this.indicators){for(var j=this.indicators.length;j--;){this.indicators[j].transitionTime(k)}}},_transitionTimingFunction:function(k){this.scrollerStyle[d.style.transitionTimingFunction]=k;if(this.indicators){for(var j=this.indicators.length;j--;){this.indicators[j].transitionTimingFunction(k)}}},_translate:function(j,l){if(this.options.useTransform){this.scrollerStyle[d.style.transform]="translate("+j+"px,"+l+"px)"+this.translateZ}else{j=g.round(j);l=g.round(l);this.scrollerStyle.left=j+"px";this.scrollerStyle.top=l+"px"}this.x=j;this.y=l;if(this.indicators){for(var k=this.indicators.length;k--;){this.indicators[k].updatePosition()}}},_initEvents:function(j){var i=j?d.removeEvent:d.addEvent,k=this.options.bindToWrapper?this.wrapper:e;i(e,"orientationchange",this);i(e,"resize",this);if(this.options.click){i(this.wrapper,"click",this,true)}if(!this.options.disableMouse){i(this.wrapper,"mousedown",this);i(k,"mousemove",this);i(k,"mousecancel",this);i(k,"mouseup",this)}if(d.hasPointer&&!this.options.disablePointer){i(this.wrapper,d.prefixPointerEvent("pointerdown"),this);i(k,d.prefixPointerEvent("pointermove"),this);i(k,d.prefixPointerEvent("pointercancel"),this);i(k,d.prefixPointerEvent("pointerup"),this)}if(d.hasTouch&&!this.options.disableTouch){i(this.wrapper,"touchstart",this);i(k,"touchmove",this);i(k,"touchcancel",this);i(k,"touchend",this)}i(this.scroller,"transitionend",this);i(this.scroller,"webkitTransitionEnd",this);i(this.scroller,"oTransitionEnd",this);i(this.scroller,"MSTransitionEnd",this)},getComputedPosition:function(){var j=e.getComputedStyle(this.scroller,null),i,k;if(this.options.useTransform){j=j[d.style.transform].split(")")[0].split(", ");i=+(j[12]||j[4]);k=+(j[13]||j[5])}else{i=+j.left.replace(/[^-\d.]/g,"");k=+j.top.replace(/[^-\d.]/g,"")}return{x:i,y:k}},_initIndicators:function(){var j=this.options.interactiveScrollbars,k=typeof this.options.scrollbars!="string",p=[],n;var m=this;this.indicators=[];if(this.options.scrollbars){if(this.options.scrollY){n={el:f("v",j,this.options.scrollbars),interactive:j,defaultScrollbars:true,customStyle:k,resize:this.options.resizeScrollbars,shrink:this.options.shrinkScrollbars,fade:this.options.fadeScrollbars,listenX:false};this.wrapper.appendChild(n.el);p.push(n)}if(this.options.scrollX){n={el:f("h",j,this.options.scrollbars),interactive:j,defaultScrollbars:true,customStyle:k,resize:this.options.resizeScrollbars,shrink:this.options.shrinkScrollbars,fade:this.options.fadeScrollbars,listenY:false};this.wrapper.appendChild(n.el);p.push(n)}}if(this.options.indicators){p=p.concat(this.options.indicators)}for(var l=p.length;l--;){this.indicators.push(new c(this,p[l]))}function o(r){for(var q=m.indicators.length;q--;){r.call(m.indicators[q])}}if(this.options.fadeScrollbars){this.on("scrollEnd",function(){o(function(){this.fade()})});this.on("scrollCancel",function(){o(function(){this.fade()})});this.on("scrollStart",function(){o(function(){this.fade(1)})});this.on("beforeScrollStart",function(){o(function(){this.fade(1,true)})})}this.on("refresh",function(){o(function(){this.refresh()})});this.on("destroy",function(){o(function(){this.destroy()});delete this.indicators})},_initWheel:function(){d.addEvent(this.wrapper,"wheel",this);d.addEvent(this.wrapper,"mousewheel",this);d.addEvent(this.wrapper,"DOMMouseScroll",this);this.on("destroy",function(){d.removeEvent(this.wrapper,"wheel",this);d.removeEvent(this.wrapper,"mousewheel",this);d.removeEvent(this.wrapper,"DOMMouseScroll",this)})},_wheel:function(m){if(!this.enabled){return}m.preventDefault();m.stopPropagation();var i,j,n,l,k=this;if(this.wheelTimeout===undefined){k._execEvent("scrollStart")}clearTimeout(this.wheelTimeout);this.wheelTimeout=setTimeout(function(){k._execEvent("scrollEnd");k.wheelTimeout=undefined},400);if("deltaX" in m){if(m.deltaMode===1){i=-m.deltaX*this.options.mouseWheelSpeed;j=-m.deltaY*this.options.mouseWheelSpeed}else{i=-m.deltaX;j=-m.deltaY}}else{if("wheelDeltaX" in m){i=m.wheelDeltaX/120*this.options.mouseWheelSpeed;j=m.wheelDeltaY/120*this.options.mouseWheelSpeed}else{if("wheelDelta" in m){i=j=m.wheelDelta/120*this.options.mouseWheelSpeed}else{if("detail" in m){i=j=-m.detail/3*this.options.mouseWheelSpeed}else{return}}}}i*=this.options.invertWheelDirection;j*=this.options.invertWheelDirection;if(!this.hasVerticalScroll){i=j;j=0}if(this.options.snap){n=this.currentPage.pageX;l=this.currentPage.pageY;if(i>0){n--}else{if(i<0){n++}}if(j>0){l--}else{if(j<0){l++}}this.goToPage(n,l);return}n=this.x+g.round(this.hasHorizontalScroll?i:0);l=this.y+g.round(this.hasVerticalScroll?j:0);if(n>0){n=0}else{if(n<this.maxScrollX){n=this.maxScrollX}}if(l>0){l=0}else{if(l<this.maxScrollY){l=this.maxScrollY}}this.scrollTo(n,l,0)},_initSnap:function(){this.currentPage={};if(typeof this.options.snap=="string"){this.options.snap=this.scroller.querySelectorAll(this.options.snap)}this.on("refresh",function(){var s=0,p,o=0,k,r,q,u=0,t,w=this.options.snapStepX||this.wrapperWidth,v=this.options.snapStepY||this.wrapperHeight,j;this.pages=[];if(!this.wrapperWidth||!this.wrapperHeight||!this.scrollerWidth||!this.scrollerHeight){return}if(this.options.snap===true){r=g.round(w/2);q=g.round(v/2);while(u>-this.scrollerWidth){this.pages[s]=[];p=0;t=0;while(t>-this.scrollerHeight){this.pages[s][p]={x:g.max(u,this.maxScrollX),y:g.max(t,this.maxScrollY),width:w,height:v,cx:u-r,cy:t-q};t-=v;p++}u-=w;s++}}else{j=this.options.snap;p=j.length;k=-1;for(;s<p;s++){if(s===0||j[s].offsetLeft<=j[s-1].offsetLeft){o=0;k++}if(!this.pages[o]){this.pages[o]=[]}u=g.max(-j[s].offsetLeft,this.maxScrollX);t=g.max(-j[s].offsetTop,this.maxScrollY);r=u-g.round(j[s].offsetWidth/2);q=t-g.round(j[s].offsetHeight/2);this.pages[o][k]={x:u,y:t,width:j[s].offsetWidth,height:j[s].offsetHeight,cx:r,cy:q};if(u>this.maxScrollX){o++}}}this.goToPage(this.currentPage.pageX||0,this.currentPage.pageY||0,0);if(this.options.snapThreshold%1===0){this.snapThresholdX=this.options.snapThreshold;this.snapThresholdY=this.options.snapThreshold}else{this.snapThresholdX=g.round(this.pages[this.currentPage.pageX][this.currentPage.pageY].width*this.options.snapThreshold);this.snapThresholdY=g.round(this.pages[this.currentPage.pageX][this.currentPage.pageY].height*this.options.snapThreshold)}});this.on("flick",function(){var i=this.options.snapSpeed||g.max(g.max(g.min(g.abs(this.x-this.startX),1000),g.min(g.abs(this.y-this.startY),1000)),300);this.goToPage(this.currentPage.pageX+this.directionX,this.currentPage.pageY+this.directionY,i)})},_nearestSnap:function(k,p){if(!this.pages.length){return{x:0,y:0,pageX:0,pageY:0}}var o=0,n=this.pages.length,j=0;if(g.abs(k-this.absStartX)<this.snapThresholdX&&g.abs(p-this.absStartY)<this.snapThresholdY){return this.currentPage}if(k>0){k=0}else{if(k<this.maxScrollX){k=this.maxScrollX}}if(p>0){p=0}else{if(p<this.maxScrollY){p=this.maxScrollY}}for(;o<n;o++){if(k>=this.pages[o][0].cx){k=this.pages[o][0].x;break}}n=this.pages[o].length;for(;j<n;j++){if(p>=this.pages[0][j].cy){p=this.pages[0][j].y;break}}if(o==this.currentPage.pageX){o+=this.directionX;if(o<0){o=0}else{if(o>=this.pages.length){o=this.pages.length-1}}k=this.pages[o][0].x}if(j==this.currentPage.pageY){j+=this.directionY;if(j<0){j=0}else{if(j>=this.pages[0].length){j=this.pages[0].length-1}}p=this.pages[0][j].y}return{x:k,y:p,pageX:o,pageY:j}},goToPage:function(i,n,k,j){j=j||this.options.bounceEasing;if(i>=this.pages.length){i=this.pages.length-1}else{if(i<0){i=0}}if(n>=this.pages[i].length){n=this.pages[i].length-1}else{if(n<0){n=0}}var m=this.pages[i][n].x,l=this.pages[i][n].y;k=k===undefined?this.options.snapSpeed||g.max(g.max(g.min(g.abs(m-this.x),1000),g.min(g.abs(l-this.y),1000)),300):k;this.currentPage={x:m,y:l,pageX:i,pageY:n};this.scrollTo(m,l,k,j)},next:function(k,j){var i=this.currentPage.pageX,l=this.currentPage.pageY;i++;if(i>=this.pages.length&&this.hasVerticalScroll){i=0;l++}this.goToPage(i,l,k,j)},prev:function(k,j){var i=this.currentPage.pageX,l=this.currentPage.pageY;i--;if(i<0&&this.hasVerticalScroll){i=0;l--}this.goToPage(i,l,k,j)},_initKeys:function(l){var k={pageUp:33,pageDown:34,end:35,home:36,left:37,up:38,right:39,down:40};var j;if(typeof this.options.keyBindings=="object"){for(j in this.options.keyBindings){if(typeof this.options.keyBindings[j]=="string"){this.options.keyBindings[j]=this.options.keyBindings[j].toUpperCase().charCodeAt(0)}}}else{this.options.keyBindings={}}for(j in k){this.options.keyBindings[j]=this.options.keyBindings[j]||k[j]}d.addEvent(e,"keydown",this);this.on("destroy",function(){d.removeEvent(e,"keydown",this)})},_key:function(n){if(!this.enabled){return}var i=this.options.snap,o=i?this.currentPage.pageX:this.x,m=i?this.currentPage.pageY:this.y,k=d.getTime(),l=this.keyTime||0,j=0.25,p;if(this.options.useTransition&&this.isInTransition){p=this.getComputedPosition();this._translate(g.round(p.x),g.round(p.y));this.isInTransition=false}this.keyAcceleration=k-l<200?g.min(this.keyAcceleration+j,50):0;switch(n.keyCode){case this.options.keyBindings.pageUp:if(this.hasHorizontalScroll&&!this.hasVerticalScroll){o+=i?1:this.wrapperWidth}else{m+=i?1:this.wrapperHeight}break;case this.options.keyBindings.pageDown:if(this.hasHorizontalScroll&&!this.hasVerticalScroll){o-=i?1:this.wrapperWidth}else{m-=i?1:this.wrapperHeight}break;case this.options.keyBindings.end:o=i?this.pages.length-1:this.maxScrollX;m=i?this.pages[0].length-1:this.maxScrollY;break;case this.options.keyBindings.home:o=0;m=0;break;case this.options.keyBindings.left:o+=i?-1:5+this.keyAcceleration>>0;break;case this.options.keyBindings.up:m+=i?1:5+this.keyAcceleration>>0;break;case this.options.keyBindings.right:o-=i?-1:5+this.keyAcceleration>>0;break;case this.options.keyBindings.down:m-=i?1:5+this.keyAcceleration>>0;break;default:return}if(i){this.goToPage(o,m);return}if(o>0){o=0;this.keyAcceleration=0}else{if(o<this.maxScrollX){o=this.maxScrollX;this.keyAcceleration=0}}if(m>0){m=0;this.keyAcceleration=0}else{if(m<this.maxScrollY){m=this.maxScrollY;this.keyAcceleration=0}}this.scrollTo(o,m,0);this.keyTime=k},_animate:function(r,q,l,m){var o=this,j=this.x,k=this.y,n=d.getTime(),p=n+l;function i(){var s=d.getTime(),v,u,t;if(s>=p){o.isAnimating=false;o._translate(r,q);if(!o.resetPosition(o.options.bounceTime)){o._execEvent("scrollEnd")}return}s=(s-n)/l;t=m(s);v=(r-j)*t+j;u=(q-k)*t+k;o._translate(v,u);if(o.isAnimating){h(i)}}this.isAnimating=true;i()},handleEvent:function(i){switch(i.type){case"touchstart":case"pointerdown":case"MSPointerDown":case"mousedown":this._start(i);break;case"touchmove":case"pointermove":case"MSPointerMove":case"mousemove":this._move(i);break;case"touchend":case"pointerup":case"MSPointerUp":case"mouseup":case"touchcancel":case"pointercancel":case"MSPointerCancel":case"mousecancel":this._end(i);break;case"orientationchange":case"resize":this._resize();break;case"transitionend":case"webkitTransitionEnd":case"oTransitionEnd":case"MSTransitionEnd":this._transitionEnd(i);break;case"wheel":case"DOMMouseScroll":case"mousewheel":this._wheel(i);break;case"keydown":this._key(i);break;case"click":if(!i._constructed){i.preventDefault();i.stopPropagation()}break}}};function f(m,i,j){var l=b.createElement("div"),k=b.createElement("div");if(j===true){l.style.cssText="position:absolute;z-index:9999";k.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:absolute;background:rgba(0,0,0,0.5);border:1px solid rgba(255,255,255,0.9);border-radius:3px"}k.className="iScrollIndicator";if(m=="h"){if(j===true){l.style.cssText+=";height:7px;left:2px;right:2px;bottom:0";k.style.height="100%"}l.className="iScrollHorizontalScrollbar"}else{if(j===true){l.style.cssText+=";width:7px;bottom:2px;top:2px;right:1px";k.style.width="100%"}l.className="iScrollVerticalScrollbar"}l.style.cssText+=";overflow:hidden";if(!i){l.style.pointerEvents="none"}l.appendChild(k);return l}function c(l,k){this.wrapper=typeof k.el=="string"?b.querySelector(k.el):k.el;this.wrapperStyle=this.wrapper.style;this.indicator=this.wrapper.children[0];this.indicatorStyle=this.indicator.style;this.scroller=l;this.options={listenX:true,listenY:true,interactive:false,resize:true,defaultScrollbars:false,shrink:false,fade:false,speedRatioX:0,speedRatioY:0};for(var j in k){this.options[j]=k[j]}this.sizeRatioX=1;this.sizeRatioY=1;this.maxPosX=0;this.maxPosY=0;if(this.options.interactive){if(!this.options.disableTouch){d.addEvent(this.indicator,"touchstart",this);d.addEvent(e,"touchend",this)}if(!this.options.disablePointer){d.addEvent(this.indicator,d.prefixPointerEvent("pointerdown"),this);d.addEvent(e,d.prefixPointerEvent("pointerup"),this)}if(!this.options.disableMouse){d.addEvent(this.indicator,"mousedown",this);d.addEvent(e,"mouseup",this)}}if(this.options.fade){this.wrapperStyle[d.style.transform]=this.scroller.translateZ;this.wrapperStyle[d.style.transitionDuration]=d.isBadAndroid?"0.001s":"0ms";this.wrapperStyle.opacity="0"}}c.prototype={handleEvent:function(i){switch(i.type){case"touchstart":case"pointerdown":case"MSPointerDown":case"mousedown":this._start(i);break;case"touchmove":case"pointermove":case"MSPointerMove":case"mousemove":this._move(i);break;case"touchend":case"pointerup":case"MSPointerUp":case"mouseup":case"touchcancel":case"pointercancel":case"MSPointerCancel":case"mousecancel":this._end(i);break}},destroy:function(){if(this.options.interactive){d.removeEvent(this.indicator,"touchstart",this);d.removeEvent(this.indicator,d.prefixPointerEvent("pointerdown"),this);d.removeEvent(this.indicator,"mousedown",this);d.removeEvent(e,"touchmove",this);d.removeEvent(e,d.prefixPointerEvent("pointermove"),this);d.removeEvent(e,"mousemove",this);d.removeEvent(e,"touchend",this);d.removeEvent(e,d.prefixPointerEvent("pointerup"),this);d.removeEvent(e,"mouseup",this)}if(this.options.defaultScrollbars){this.wrapper.parentNode.removeChild(this.wrapper)}},_start:function(j){var i=j.touches?j.touches[0]:j;j.preventDefault();j.stopPropagation();this.transitionTime();this.initiated=true;this.moved=false;this.lastPointX=i.pageX;this.lastPointY=i.pageY;this.startTime=d.getTime();if(!this.options.disableTouch){d.addEvent(e,"touchmove",this)}if(!this.options.disablePointer){d.addEvent(e,d.prefixPointerEvent("pointermove"),this)}if(!this.options.disableMouse){d.addEvent(e,"mousemove",this)}this.scroller._execEvent("beforeScrollStart")},_move:function(n){var i=n.touches?n.touches[0]:n,j,l,o,m,k=d.getTime();if(!this.moved){this.scroller._execEvent("scrollStart")}this.moved=true;j=i.pageX-this.lastPointX;this.lastPointX=i.pageX;l=i.pageY-this.lastPointY;this.lastPointY=i.pageY;o=this.x+j;m=this.y+l;this._pos(o,m);n.preventDefault();n.stopPropagation()},_end:function(k){if(!this.initiated){return}this.initiated=false;k.preventDefault();k.stopPropagation();d.removeEvent(e,"touchmove",this);d.removeEvent(e,d.prefixPointerEvent("pointermove"),this);d.removeEvent(e,"mousemove",this);if(this.scroller.options.snap){var i=this.scroller._nearestSnap(this.scroller.x,this.scroller.y);var j=this.options.snapSpeed||g.max(g.max(g.min(g.abs(this.scroller.x-i.x),1000),g.min(g.abs(this.scroller.y-i.y),1000)),300);if(this.scroller.x!=i.x||this.scroller.y!=i.y){this.scroller.directionX=0;this.scroller.directionY=0;this.scroller.currentPage=i;this.scroller.scrollTo(i.x,i.y,j,this.scroller.options.bounceEasing)}}if(this.moved){this.scroller._execEvent("scrollEnd")}},transitionTime:function(i){i=i||0;this.indicatorStyle[d.style.transitionDuration]=i+"ms";if(!i&&d.isBadAndroid){this.indicatorStyle[d.style.transitionDuration]="0.001s"}},transitionTimingFunction:function(i){this.indicatorStyle[d.style.transitionTimingFunction]=i},refresh:function(){this.transitionTime();if(this.options.listenX&&!this.options.listenY){this.indicatorStyle.display=this.scroller.hasHorizontalScroll?"block":"none"}else{if(this.options.listenY&&!this.options.listenX){this.indicatorStyle.display=this.scroller.hasVerticalScroll?"block":"none"}else{this.indicatorStyle.display=this.scroller.hasHorizontalScroll||this.scroller.hasVerticalScroll?"block":"none"}}if(this.scroller.hasHorizontalScroll&&this.scroller.hasVerticalScroll){d.addClass(this.wrapper,"iScrollBothScrollbars");d.removeClass(this.wrapper,"iScrollLoneScrollbar");if(this.options.defaultScrollbars&&this.options.customStyle){if(this.options.listenX){this.wrapper.style.right="8px"}else{this.wrapper.style.bottom="8px"}}}else{d.removeClass(this.wrapper,"iScrollBothScrollbars");d.addClass(this.wrapper,"iScrollLoneScrollbar");if(this.options.defaultScrollbars&&this.options.customStyle){if(this.options.listenX){this.wrapper.style.right="2px"}else{this.wrapper.style.bottom="2px"}}}var i=this.wrapper.offsetHeight;if(this.options.listenX){this.wrapperWidth=this.wrapper.clientWidth;if(this.options.resize){this.indicatorWidth=g.max(g.round(this.wrapperWidth*this.wrapperWidth/(this.scroller.scrollerWidth||this.wrapperWidth||1)),8);this.indicatorStyle.width=this.indicatorWidth+"px"}else{this.indicatorWidth=this.indicator.clientWidth}this.maxPosX=this.wrapperWidth-this.indicatorWidth;if(this.options.shrink=="clip"){this.minBoundaryX=-this.indicatorWidth+8;this.maxBoundaryX=this.wrapperWidth-8}else{this.minBoundaryX=0;this.maxBoundaryX=this.maxPosX}this.sizeRatioX=this.options.speedRatioX||(this.scroller.maxScrollX&&(this.maxPosX/this.scroller.maxScrollX))}if(this.options.listenY){this.wrapperHeight=this.wrapper.clientHeight;if(this.options.resize){this.indicatorHeight=g.max(g.round(this.wrapperHeight*this.wrapperHeight/(this.scroller.scrollerHeight||this.wrapperHeight||1)),8);this.indicatorStyle.height=this.indicatorHeight+"px"}else{this.indicatorHeight=this.indicator.clientHeight}this.maxPosY=this.wrapperHeight-this.indicatorHeight;if(this.options.shrink=="clip"){this.minBoundaryY=-this.indicatorHeight+8;this.maxBoundaryY=this.wrapperHeight-8}else{this.minBoundaryY=0;this.maxBoundaryY=this.maxPosY}this.maxPosY=this.wrapperHeight-this.indicatorHeight;this.sizeRatioY=this.options.speedRatioY||(this.scroller.maxScrollY&&(this.maxPosY/this.scroller.maxScrollY))}this.updatePosition()},updatePosition:function(){var i=this.options.listenX&&g.round(this.sizeRatioX*this.scroller.x)||0,j=this.options.listenY&&g.round(this.sizeRatioY*this.scroller.y)||0;if(!this.options.ignoreBoundaries){if(i<this.minBoundaryX){if(this.options.shrink=="scale"){this.width=g.max(this.indicatorWidth+i,8);this.indicatorStyle.width=this.width+"px"}i=this.minBoundaryX}else{if(i>this.maxBoundaryX){if(this.options.shrink=="scale"){this.width=g.max(this.indicatorWidth-(i-this.maxPosX),8);this.indicatorStyle.width=this.width+"px";i=this.maxPosX+this.indicatorWidth-this.width}else{i=this.maxBoundaryX}}else{if(this.options.shrink=="scale"&&this.width!=this.indicatorWidth){this.width=this.indicatorWidth;this.indicatorStyle.width=this.width+"px"}}}if(j<this.minBoundaryY){if(this.options.shrink=="scale"){this.height=g.max(this.indicatorHeight+j*3,8);this.indicatorStyle.height=this.height+"px"}j=this.minBoundaryY}else{if(j>this.maxBoundaryY){if(this.options.shrink=="scale"){this.height=g.max(this.indicatorHeight-(j-this.maxPosY)*3,8);this.indicatorStyle.height=this.height+"px";j=this.maxPosY+this.indicatorHeight-this.height}else{j=this.maxBoundaryY}}else{if(this.options.shrink=="scale"&&this.height!=this.indicatorHeight){this.height=this.indicatorHeight;this.indicatorStyle.height=this.height+"px"}}}}this.x=i;this.y=j;if(this.scroller.options.useTransform){this.indicatorStyle[d.style.transform]="translate("+i+"px,"+j+"px)"+this.scroller.translateZ}else{this.indicatorStyle.left=i+"px";this.indicatorStyle.top=j+"px"}},_pos:function(i,j){if(i<0){i=0}else{if(i>this.maxPosX){i=this.maxPosX}}if(j<0){j=0}else{if(j>this.maxPosY){j=this.maxPosY}}i=this.options.listenX?g.round(i/this.sizeRatioX):this.scroller.x;j=this.options.listenY?g.round(j/this.sizeRatioY):this.scroller.y;this.scroller.scrollTo(i,j)},fade:function(l,k){if(k&&!this.visible){return}clearTimeout(this.fadeTimeout);this.fadeTimeout=null;var j=l?250:500,i=l?0:300;l=l?"1":"0";this.wrapperStyle[d.style.transitionDuration]=j+"ms";this.fadeTimeout=setTimeout((function(m){this.wrapperStyle.opacity=m;this.visible=+m}).bind(this,l),i)}};a.utils=d;if(typeof module!="undefined"&&module.exports){module.exports=a}else{e.IScroll=a}})(window,document,Math);

